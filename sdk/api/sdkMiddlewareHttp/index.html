
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../sdkMiddlewareCorrelationId/">
      
      
        <link rel="next" href="../sdkMiddlewareLogger/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>sdk-middleware-http - commercetools NodeJS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sdk-middleware-http" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="commercetools NodeJS" class="md-header__button md-logo" aria-label="commercetools NodeJS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            commercetools NodeJS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              sdk-middleware-http
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="commercetools NodeJS" class="md-nav__button md-logo" aria-label="commercetools NodeJS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    commercetools NodeJS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cli
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Cli
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cli/personal-data-erasure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Personal Data Erasure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../cli/resource-deleter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource Deleter
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sdk
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Sdk
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDK
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Middlewares/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middlewares
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../upgrading-from-sphere-node-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading from sphere-node-sdk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" checked>
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Api
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Api
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apiRequestBuilder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    api-request-builder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getCredentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    get-credentials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../httpUserAgent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    http-user-agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkAuth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkClient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-client
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkMiddlewareAuth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-middleware-auth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkMiddlewareCorrelationId/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-middleware-correlation-id
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    sdk-middleware-http
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    sdk-middleware-http
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      Node.js
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser" class="md-nav__link">
    <span class="md-ellipsis">
      Browser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#createhttpmiddlewareoptions" class="md-nav__link">
    <span class="md-ellipsis">
      createHttpMiddleware(options)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="createHttpMiddleware(options)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#named-arguments-options" class="md-nav__link">
    <span class="md-ellipsis">
      Named arguments (options)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrying-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Retrying requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Token caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      Usage example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abortcontroller-getabortcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      abortController | getAbortController
    </span>
  </a>
  
    <nav class="md-nav" aria-label="abortController | getAbortController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Usage example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geterrorbycodecode" class="md-nav__link">
    <span class="md-ellipsis">
      getErrorByCode(code)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="getErrorByCode(code)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Usage example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkMiddlewareLogger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-middleware-logger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkMiddlewareQueue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-middleware-queue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sdkMiddlewareUserAgent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sdk-middleware-user-agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../syncActions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sync-actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typescriptSdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TypeScript SDK Client v2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install" class="md-nav__link">
    <span class="md-ellipsis">
      Install
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Install">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodejs" class="md-nav__link">
    <span class="md-ellipsis">
      Node.js
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browser" class="md-nav__link">
    <span class="md-ellipsis">
      Browser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#createhttpmiddlewareoptions" class="md-nav__link">
    <span class="md-ellipsis">
      createHttpMiddleware(options)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="createHttpMiddleware(options)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#named-arguments-options" class="md-nav__link">
    <span class="md-ellipsis">
      Named arguments (options)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrying-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Retrying requests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#token-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Token caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      Usage example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abortcontroller-getabortcontroller" class="md-nav__link">
    <span class="md-ellipsis">
      abortController | getAbortController
    </span>
  </a>
  
    <nav class="md-nav" aria-label="abortController | getAbortController">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      Usage example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geterrorbycodecode" class="md-nav__link">
    <span class="md-ellipsis">
      getErrorByCode(code)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="getErrorByCode(code)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#returns" class="md-nav__link">
    <span class="md-ellipsis">
      Returns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      Usage example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="sdk-middleware-http"><code>sdk-middleware-http</code></h1>
<p>Middleware to send the actual HTTP <a href="/sdk/Glossary#clientrequest">request</a>.</p>
<h2 id="install">Install</h2>
<h4 id="nodejs">Node.js</h4>
<pre><code class="language-bash">npm install --save @commercetools/sdk-middleware-http
</code></pre>
<h4 id="browser">Browser</h4>
<pre><code class="language-html">&lt;script src=&quot;https://unpkg.com/@commercetools/sdk-middleware-http/dist/commercetools-sdk-middleware-http.umd.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
  // global: CommercetoolsSdkMiddlewareHttp
&lt;/script&gt;
</code></pre>
<h2 id="createhttpmiddlewareoptions"><code>createHttpMiddleware(options)</code></h2>
<p>Creates a <a href="/sdk/Glossary#middleware">middleware</a> to handle HTTP requests for the commercetools platform API.</p>
<p>The HTTP middleware can run in either a browser or Node.js environment. For Node.js environments it is important to either have a <code>fetch</code> implementation either globally available via e.g. <a href="https://github.com/matthew-andrews/isomorphic-fetch">isomorphic-fetch</a> or to pass it in as an argument (see below) via e.g. <a href="https://github.com/bitinn/node-fetch">node-fetch</a>. In browsers without a native <code>fetch</code> implementation any well known <code>fetch</code> polyfill should be compatible with the middleware such as <a href="https://github.com/whatwg/fetch">whatwg-fetch</a> or <a href="https://github.com/developit/unfetch">unfetch</a>.</p>
<h4 id="named-arguments-options">Named arguments (options)</h4>
<ol>
<li><code>host</code> <em>(String)</em>: the host of the HTTP API service</li>
<li><code>credentialsMode</code> <em>(String)</em>: one of the supported <code>credentials</code> modes (<code>omit</code>, <code>same-origin</code>, <code>include</code>), useful when working with HTTP Cookies. (optional)</li>
<li><code>includeResponseHeaders</code> <em>(Boolean)</em>: flag whether to include the response headers in the response, if omitted headers is omitted from response</li>
<li><code>includeOriginalRequest</code> <em>(Boolean)</em>: flag whether to include the original request sent in the response. Can be useful if you want to see the final request being sent.</li>
<li><code>maskSensitiveHeaderData</code> <em>(Boolean)</em>: flag to mask sensitie data in the header. e.g. Authorization token</li>
<li><code>enableRetry</code> <em>(Boolean)</em>: flag to enable retry on network errors and <code>500</code> response. (Default: false)</li>
<li><code>retryCodes</code> - <em>(Array)</em>: array of <code>statusCodes</code> [<code>numbers</code>] and error code or messages [<code>string</code>] for retring requests when the statusCodes and/or error message/code matches an entry in the list.</li>
<li><code>maxRetries</code> <em>(Number)</em>: number of times to retry the request before failing the request. (Default: 10)</li>
<li><code>retryDelay</code> <em>(Number)</em>: amount of milliseconds to wait before retrying the next request. (Default: 200)</li>
<li><code>backoff</code> <em>(Boolean)</em>: activates exponential backoff. Recommended to prevent spamming of the server. (Default: true)</li>
<li><code>maxDelay</code> <em>(Number)</em>: The maximum duration (milliseconds) to wait before retrying, useful if the delay time grew exponentially more than reasonable</li>
<li><code>retryOnAbort</code> <em>(Boolean)</em>: Configure the client to retry an aborted request or not. Defaults to false.</li>
<li><code>fetch</code> <em>(Function)</em>: A <code>fetch</code> implementation which can be e.g. <code>node-fetch</code> or <code>unfetch</code> but also the native browser <code>fetch</code> function</li>
<li><code>timeout</code> <em>(Number)</em>: Request/response timeout in ms. Must be globally available or passed in <code>AbortController</code></li>
<li><code>abortController</code> or <code>getAbortController</code> depending on what you chose to handle the timeout (<em>abortController</em>): This property accepts the <code>AbortController</code> instance. Could be <a href="https://www.npmjs.com/package/abort-controller">abort-controller</a> or a globally available one.</li>
<li><code>retryConfig</code> <em>(Object)</em>: Field required in the object listed below</li>
</ol>
<h4 id="retrying-requests">Retrying requests</h4>
<p>This modules have a retrying ability incase of network failures or 503 response errors. To enable this behavior, pass the <code>enableRetry</code> flag in the options and also set the maximum number of retries (<code>maxRetries</code>) and amount of milliseconds to wait before retrying a request (<code>retryDelay</code>).</p>
<p>The repeater implements an exponential delay, meaning the wait time is not constant and it grows on every retry.</p>
<h4 id="token-caching">Token caching</h4>
<p>The token is retrieved and cached upon the first request made by the client. Then, it gets refreshed when it expires. To utilize this, please make sure you use the same client instance and do not create new ones.</p>
<h4 id="usage-example">Usage example</h4>
<pre><code class="language-js">import { createClient } from '@commercetools/sdk-client'
import { createHttpMiddleware } from '@commercetools/sdk-middleware-http'

const client = createClient({
  middlewares: [
    createHttpMiddleware({
      host: 'https://api.commercetools.com',
      includeResponseHeaders: true,
      includeOriginalRequest: true,
      maskSensitiveHeaderData: true,
      enableRetry: true,
      retryConfig: {
        maxRetries: 2,
        retryDelay: 300, //milliseconds
        maxDelay: 5000, //milliseconds
        retryOnAbort: false,
        retryCodes: [504, 'ETIMEDOUT', 'ECONNREFUSED', 503],
      },

      // Optional if not globally available
      timeout: 1000,
      fetch,
    }),
  ],
})
</code></pre>
<h2 id="abortcontroller-getabortcontroller"><code>abortController</code> | <code>getAbortController</code></h2>
<p>This is used to signal the retry module to retry the request in an event of a request timeout or service outage.</p>
<h4 id="usage-example_1">Usage example</h4>
<pre><code class="language-js">// Use default options
const httpMiddleware = createHttpMiddleware({
  host: testHost,
  timeout: 1000, // time out after 1s
  fetch,
  abortController: new AbortController(),
})
</code></pre>
<p>Note however the slight difference in usage of the <code>getAbortController</code> property of the http middleware.</p>
<pre><code class="language-js">// Use default options
const httpMiddleware = createHttpMiddleware({
  host: testHost,
  timeout: 1000, // time out after 1s
  fetch,
  getAbortController: () =&gt; new AbortController(),
})
</code></pre>
<p>This is to ensure that a new instance of the AbortController is always created and is independent of each other. Unlike the former (abortController) which only creates a single abortController instance for the middleware, in this very case, if a single request times out, it will propagate to all other http requests that is using the <code>AbortController</code> instance. This is useful when a bunch of sent out requests needs to timeout if at least one within the bunch times out.</p>
<h2 id="geterrorbycodecode"><code>getErrorByCode(code)</code></h2>
<p>Returns a <a href="/sdk/Glossary#httperrortype">custom error type</a> given its status <em>code</em>.</p>
<h4 id="arguments">Arguments</h4>
<ol>
<li><code>code</code> <em>(Number)</em>: the HTTP status code</li>
</ol>
<h4 id="returns">Returns</h4>
<p>(<em>Error</em> or <em>undefined</em>): A custom error type (e.g. <code>BadRequest</code>, <code>Unauthorized</code>) if the <em>code</em> matches, otherwise <code>undefined</code>.</p>
<h4 id="usage-example_2">Usage example</h4>
<pre><code class="language-js">import { getErrorByCode } from '@commercetools/sdk-middleware-http'

const ErrorType = getErrorByCode(400)
const error = new ErrorType('Oops')
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>